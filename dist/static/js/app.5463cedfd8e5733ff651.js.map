{"version":3,"sources":["webpack:///static/js/app.5463cedfd8e5733ff651.js","webpack:///./src/helpers/UploadHelper.js","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/classes/Panning.js","webpack:///./src/App.vue?d621","webpack:///./src/classes/ClipRect.js","webpack:///src/App.vue"],"names":["webpackJsonp","05jh","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","n","__WEBPACK_IMPORTED_MODULE_1_jquery__","__WEBPACK_IMPORTED_MODULE_1_jquery___default","handleEvent","e","callback","target","files","length","file","reader","FileReader","onload","f","data","result","fabric","Image","fromURL","img","aspect","fabricImage","imageProps","left","top","originX","originY","angle","props","width","height","set","readAsDataURL","currentTarget","val","7iRb","exports","M93x","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","__vue_styles__","Component","NHnr","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","config","productionTip","el","render","h","f384","Canvas","prototype","toggleDragMode","dragMode","_this","this","lastClientX","lastClientY","state","discardActiveObject","defaultCursor","forEachObject","object","prevEvented","evented","prevSelectable","selectable","selection","on","clientX","clientY","deltaX","deltaY","delta","Point","relativePan","trigger","undefined","off","gSRr","lyur","_vm","_h","$createElement","_c","_self","attrs","repo","_v","staticClass","id","click","$event","stopPropagation","preventDefault","zoomIn","zoomOut","reset","_e","removeActiveObject","_s","helpMessage","staticRenderFns","esExports","wuSQ","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_3_jquery__","__WEBPACK_IMPORTED_MODULE_3_jquery___default","__WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__","_class","canvas","_this2","userOptions","arguments","defaults","fill","strokeWidth","options","hasImage","clipRect","Rect","_","_positionButton","inputUpload","document","createElement","type","body","append","btnUpload","innerHTML","style","position","_onClickButtonUpload","bind","change","_handleUpload","key","_this3","_loadImage","_this4","clipTo","ctx","panLeft","viewportTransform","panTop","setCoords","save","setTransform","beginPath","rect","_zoom","_multiplied","closePath","restore","_setState","add","renderAll","setActiveObject","degrees","Math","PI","hide","show","upperCanvasEl","offset","window","devicePixelRatio","needsDevicePixelRatio","getZoom","domCanvasPos","_getDomCanvasPosition","objectPos","domButtonSize","outerWidth","outerHeight","xJD8","__WEBPACK_IMPORTED_MODULE_1_vue_gh_corners__","__WEBPACK_IMPORTED_MODULE_1_vue_gh_corners___default","__WEBPACK_IMPORTED_MODULE_2_vue_gh_corners_dist_vue_github_corners_css__","__WEBPACK_IMPORTED_MODULE_4__classes_ClipRect__","__WEBPACK_IMPORTED_MODULE_5__classes_Panning__","use","a","name","computed","activeObject","methods","remove","setZoom","absolutePan","watch","mounted","backgroundColor","i","j","gridWidth","keydown","keyCode","obj","getActiveObject","canvasVisible"],"mappings":"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","file":"static/js/app.5463cedfd8e5733ff651.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"05jh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);\n\n/* global fabric */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    handleEvent: function handleEvent(e, callback) {\n\n        // If the user cancelled, we want to return\n        if (e.target.files.length === 0) {\n            return;\n        }\n        // Get the first file\n        var file = e.target.files[0];\n        // Create a FileReader\n        var reader = new FileReader();\n\n        // Uncomment the following lines to check the filesize before loading the image\n\n        // let size = file.size/1024/1024;\n        // if (size > 5) {\n        //     alert('Images larger than 5MB are not accepted.');\n        //     return;\n        // }\n\n        // Set the onload event handler\n        reader.onload = function (f) {\n            // Get the result\n            var data = f.target.result;\n            // Create an image from the data we got back\n            fabric.Image.fromURL(data, function (img) {\n                var aspect = 0;\n                var fabricImage = null;\n                var imageProps = {\n                    left: 0,\n                    top: 0,\n                    originX: 'left',\n                    originY: 'top',\n                    angle: 0\n                };\n                var props = {};\n                // Landscape image\n                if (img.width > img.height) {\n                    // Set the aspect\n                    aspect = img.width / img.height;\n                    // Set the props\n                    props = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(imageProps, {\n                        width: 1,\n                        height: 1 / aspect\n                    });\n                } else {\n                    // Portrait image\n                    // Set the aspect\n                    aspect = img.height / img.width;\n                    // Set the props\n                    props = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(imageProps, {\n                        width: 1 / aspect,\n                        height: 1\n                    });\n                }\n                // Assign the props to the fabric image\n                fabricImage = img.set(props);\n                // Callback\n                callback(fabricImage);\n            });\n        };\n        // Start the reader\n        reader.readAsDataURL(file);\n        // Reset the input[type=\"file\"]\n        __WEBPACK_IMPORTED_MODULE_1_jquery___default()(e.currentTarget).val('');\n    }\n});\n\n/***/ }),\n\n/***/ \"7iRb\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"lyur\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"7iRb\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"/5sW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */]);\n  }\n});\n\n/***/ }),\n\n/***/ \"f384\":\n/***/ (function(module, exports) {\n\n/* global fabric */\nvar STATE_IDLE = 'idle';\nvar STATE_PANNING = 'panning';\nfabric.Canvas.prototype.toggleDragMode = function (dragMode) {\n    var _this = this;\n\n    // Remember the previous X and Y coordinates for delta calculations\n    var lastClientX = void 0;\n    var lastClientY = void 0;\n    // Keep track of the state\n    var state = STATE_IDLE;\n    // We're entering dragmode\n    if (dragMode) {\n        // Discard any active object\n        this.discardActiveObject();\n        // Set the cursor to 'move'\n        this.defaultCursor = 'move';\n        // Loop over all objects and disable events / selectable. We remember its value in a temp variable stored on each object\n        this.forEachObject(function (object) {\n            object.prevEvented = object.evented;\n            object.prevSelectable = object.selectable;\n            object.evented = false;\n            object.selectable = false;\n        });\n        // Remove selection ability on the canvas\n        this.selection = false;\n        // When MouseUp fires, we set the state to idle\n        this.on('mouse:up', function (e) {\n            state = STATE_IDLE;\n        });\n        // When MouseDown fires, we set the state to panning\n        this.on('mouse:down', function (e) {\n            state = STATE_PANNING;\n            lastClientX = e.e.clientX;\n            lastClientY = e.e.clientY;\n        });\n        // When the mouse moves, and we're panning (mouse down), we continue\n        this.on('mouse:move', function (e) {\n            if (state === STATE_PANNING && e && e.e) {\n                // let delta = new fabric.Point(e.e.movementX, e.e.movementY); // No Safari support for movementX and movementY\n                // For cross-browser compatibility, I had to manually keep track of the delta\n\n                // Calculate deltas\n                var deltaX = 0;\n                var deltaY = 0;\n                if (lastClientX) {\n                    deltaX = e.e.clientX - lastClientX;\n                }\n                if (lastClientY) {\n                    deltaY = e.e.clientY - lastClientY;\n                }\n                // Update the last X and Y values\n                lastClientX = e.e.clientX;\n                lastClientY = e.e.clientY;\n\n                var delta = new fabric.Point(deltaX, deltaY);\n                _this.relativePan(delta);\n                _this.trigger('moved');\n            }\n        });\n    } else {\n        // When we exit dragmode, we restore the previous values on all objects\n        this.forEachObject(function (object) {\n            object.evented = object.prevEvented !== undefined ? object.prevEvented : object.evented;\n            object.selectable = object.prevSelectable !== undefined ? object.prevSelectable : object.selectable;\n        });\n        // Reset the cursor\n        this.defaultCursor = 'default';\n        // Remove the event listeners\n        this.off('mouse:up');\n        this.off('mouse:down');\n        this.off('mouse:move');\n        // Restore selection ability on the canvas\n        this.selection = true;\n    }\n};\n\n/***/ }),\n\n/***/ \"gSRr\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"lyur\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('github-corners',{attrs:{\"repo\":\"SabatinoMasala/fabric-clipping-demo\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\",attrs:{\"id\":\"toolbar\"}},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomIn($event)}}},[_vm._v(\"Zoom in\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomOut($event)}}},[_vm._v(\"Zoom out\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),(!_vm.dragMode)?_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = true}}},[_vm._v(\"Start panning\")]):_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = false}}},[_vm._v(\"Stop panning\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.reset()}}},[_vm._v(\"Reset pan & zoom\")]),_vm._v(\" \"),(_vm.activeObject)?_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.activeObject)?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.removeActiveObject()}}},[_vm._v(\"Delete object\")]):_vm._e()]),_vm._v(\" \"),_c('h1',{staticClass:\"text-center heading\"},[_vm._v(\"Fabric.js clipping & panning demo\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"wrapper\"},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"500\",\"height\":\"500\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[(_vm.helpMessage)?_c('p',{staticClass:\"help\"},[_vm._v(_vm._s(_vm.helpMessage))]):_vm._e()])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"wuSQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__ = __webpack_require__(\"05jh\");\n\n\n\n\n\n\nvar _class = function () {\n    function _class(canvas) {\n        var _this2 = this;\n\n        var userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n        // Set some defaults\n        var defaults = {\n            originX: 'left',\n            originY: 'top',\n            fill: '#FF8552',\n            strokeWidth: 0,\n            selectable: false,\n            evented: false\n        };\n        // Overwrite the defaults with the user options\n        var options = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(defaults, userOptions);\n        // Keep track of the state\n        this.state = {\n            hasImage: false\n        };\n        // Store some instance variables\n        this.canvas = canvas;\n        this.clipRect = new fabric.Rect(options);\n        // Events\n        this.clipRect.on('moving', function (_) {\n            _this2._positionButton();\n        });\n        this.canvas.on('moved', function (_) {\n            _this2._positionButton();\n        });\n\n        // Input upload\n        this.inputUpload = document.createElement('input');\n        this.inputUpload.type = 'file';\n        document.body.append(this.inputUpload);\n\n        // Button\n        this.btnUpload = document.createElement('button');\n        this.btnUpload.innerHTML = 'Upload';\n        this.btnUpload.style.position = 'absolute';\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()('.canvas-container').append(this.btnUpload);\n\n        // DOM Events\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).click(this._onClickButtonUpload.bind(this));\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.inputUpload).change(this._handleUpload.bind(this));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(_class, [{\n        key: '_handleUpload',\n        value: function _handleUpload(e) {\n            var _this3 = this;\n\n            __WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__[\"a\" /* default */].handleEvent(e, function (fabricImage) {\n                _this3._loadImage(fabricImage);\n            });\n        }\n    }, {\n        key: '_loadImage',\n        value: function _loadImage(fabricImage) {\n            var _this4 = this;\n\n            // Store a reference to this\n            var _this = this;\n            // Set values on the image\n            fabricImage.set({\n                left: this.clipRect.left,\n                top: this.clipRect.top,\n                width: fabricImage.width * this.clipRect.width,\n                height: fabricImage.height * this.clipRect.width,\n                clipTo: function clipTo(ctx) {\n                    // Get the viewport absolute panning X and Y\n                    var panLeft = this.canvas.viewportTransform[4];\n                    var panTop = this.canvas.viewportTransform[5];\n                    this.setCoords();\n                    ctx.save();\n                    // Reset the context\n                    ctx.setTransform(1, 0, 0, 1, 0, 0);\n                    // Start drawing\n                    ctx.beginPath();\n                    // Get the values\n                    ctx.rect(_this._zoom(_this.clipRect.left) + _this._multiplied(panLeft), _this._zoom(_this.clipRect.top) + _this._multiplied(panTop), _this._zoom(_this.clipRect.width), _this._zoom(_this.clipRect.height));\n                    // Stop drawing\n                    ctx.closePath();\n                    // Restore\n                    ctx.restore();\n                }\n            });\n            // Events on the image\n            fabricImage.on('removed', function (e) {\n                _this4._setState({\n                    hasImage: false\n                });\n            });\n            // Add the image to the canvas\n            this.canvas.add(fabricImage).renderAll();\n            // Set the active image\n            this.canvas.setActiveObject(fabricImage);\n            // Update the state\n            this._setState({\n                hasImage: true\n            });\n        }\n        // Helper method to convert degrees to radians\n\n    }, {\n        key: '_degToRad',\n        value: function _degToRad(degrees) {\n            return degrees * (Math.PI / 180);\n        }\n        // Update the current state\n\n    }, {\n        key: '_setState',\n        value: function _setState(state) {\n            // Overwrite the state\n            this.state = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(this.state, state);\n            // If we have no image, we show the upload button\n            if (!this.state.hasImage) {\n                __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).show();\n                this._positionButton();\n            } else {\n                // If we have an image, we hide the upload button\n                __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).hide();\n            }\n        }\n        // Click handler for the upload button\n\n    }, {\n        key: '_onClickButtonUpload',\n        value: function _onClickButtonUpload(e) {\n            // We trigger the click event on the upload input\n            __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.inputUpload).trigger('click');\n        }\n        // Helper method to get the position of the canvas element\n\n    }, {\n        key: '_getDomCanvasPosition',\n        value: function _getDomCanvasPosition() {\n            return __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.canvas.upperCanvasEl).offset();\n        }\n        // When we're on retina displays (iPad/MBP) the devicePixelRatio isn't 1, we have to multiply values manually\n\n    }, {\n        key: '_multiplied',\n        value: function _multiplied(value) {\n            return fabric.window.devicePixelRatio * value;\n        }\n        // Get the canvas zoom and multiply the given value, dom elements don't need the multiplication with devicePixelRatio\n\n    }, {\n        key: '_zoom',\n        value: function _zoom(value) {\n            var needsDevicePixelRatio = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            var multiplier = this.canvas.getZoom() * (needsDevicePixelRatio ? fabric.window.devicePixelRatio : 1); // Retina ready!\n            return value * multiplier;\n        }\n        // Position the upload button\n\n    }, {\n        key: '_positionButton',\n        value: function _positionButton() {\n            // Get canvas position in the dom\n            var domCanvasPos = this._getDomCanvasPosition();\n            // Get the absolute panned values of the canvas\n            var panLeft = this.canvas.viewportTransform[4];\n            var panTop = this.canvas.viewportTransform[5];\n            // Dom doesn't need correction for retina displays\n            var objectPos = {\n                top: this._zoom(this.clipRect.top, false),\n                left: this._zoom(this.clipRect.left, false),\n                width: this._zoom(this.clipRect.width, false),\n                height: this._zoom(this.clipRect.height, false)\n            };\n            // Get the button size\n            var domButtonSize = {\n                width: __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).outerWidth(),\n                height: __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).outerHeight()\n            };\n            // Set the offset on the upload button\n            __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).offset({\n                top: objectPos.top + objectPos.height / 2 + panTop - domButtonSize.height / 2 + domCanvasPos.top,\n                left: objectPos.left + objectPos.width / 2 + panLeft - domButtonSize.width / 2 + domCanvasPos.left\n            });\n        }\n        // Public method to add the cliprect to the canvas\n\n    }, {\n        key: 'render',\n        value: function render() {\n            // Add the cliprect to the canvas\n            this.canvas.add(this.clipRect).renderAll();\n            // Reposition the button\n            this._positionButton();\n        }\n    }]);\n\n    return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"/5sW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_gh_corners__ = __webpack_require__(\"7RXh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_gh_corners___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_gh_corners__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_gh_corners_dist_vue_github_corners_css__ = __webpack_require__(\"gSRr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_gh_corners_dist_vue_github_corners_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_vue_gh_corners_dist_vue_github_corners_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__classes_ClipRect__ = __webpack_require__(\"wuSQ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__classes_Panning__ = __webpack_require__(\"f384\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__classes_Panning___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__classes_Panning__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_gh_corners___default.a);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    name: 'fabric-clipping-demo',\n    computed: {\n        // Generate helpful messages to help the user\n        helpMessage: function helpMessage() {\n            if (this.activeObject) {\n                return 'Press backspace to delete the object';\n            }\n            if (this.dragMode) {\n                return 'Drag the canvas to pan';\n            }\n            return false;\n        }\n    },\n    methods: {\n        // Remove the active object\n        removeActiveObject: function removeActiveObject() {\n            this.activeObject.remove();\n            this.canvas.renderAll();\n        },\n\n        // Reset to initial values\n        reset: function reset() {\n            this.canvas.setZoom(1);\n            this.canvas.absolutePan(new fabric.Point(0, 0));\n            this.dragMode = false;\n            this.canvas.trigger('moved');\n        },\n\n        // Zoom in handler\n        zoomIn: function zoomIn() {\n            this.canvas.setZoom(this.canvas.getZoom() + 0.2);\n            this.canvas.trigger('moved');\n        },\n\n        // Zoom out handler\n        zoomOut: function zoomOut() {\n            this.canvas.setZoom(this.canvas.getZoom() - 0.2);\n            this.canvas.trigger('moved');\n        }\n    },\n    watch: {\n        // Dragmode watcher, this will toggle the dragmode on the canvas whenever the 'dragMode' variable changes\n        dragMode: function dragMode() {\n            this.canvas.toggleDragMode(this.dragMode);\n        }\n    },\n    mounted: function mounted() {\n        var _this = this;\n\n        // Grid variables\n        var numberOfRows = 3;\n        var numberOfCols = 3;\n        var gridWidth = 250;\n        var spacer = 1;\n\n        // Create the canvas\n        this.canvas = new fabric.Canvas('canvas');\n        this.canvas.backgroundColor = '#fff';\n\n        // Listen to some events\n        this.canvas.on('object:selected', function (e) {\n            _this.activeObject = e.target;\n        });\n        this.canvas.on('selection:cleared', function (_) {\n            _this.activeObject = false;\n        });\n\n        // Create the grid\n        for (var i = 0; i < numberOfRows; i++) {\n            for (var j = 0; j < numberOfCols; j++) {\n                // Create the cliprect objects on the grid\n                var clipRect = new __WEBPACK_IMPORTED_MODULE_4__classes_ClipRect__[\"a\" /* default */](this.canvas, {\n                    left: j * (gridWidth + spacer),\n                    top: i * (gridWidth + spacer),\n                    width: gridWidth - spacer,\n                    height: gridWidth - spacer\n                });\n                // Render it!\n                clipRect.render();\n            }\n        }\n\n        // I didn't use Vue key bindings for the sake of this example\n        var KEY_BACKSPACE = 8;\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()('body').keydown(function (e) {\n            if (e.keyCode === KEY_BACKSPACE) {\n                // Get the object and delete it if we have one\n                var obj = _this.canvas.getActiveObject();\n                if (obj) {\n                    obj.remove(); // This will trigger 'removed' on the image\n                    _this.canvas.renderAll();\n                }\n            }\n        });\n    },\n    data: function data() {\n        return {\n            canvasVisible: true,\n            activeObject: false,\n            canvas: false,\n            dragMode: false\n        };\n    }\n});\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.5463cedfd8e5733ff651.js","/* global fabric */\nimport $ from 'jquery';\nexport default {\n    handleEvent(e, callback) {\n\n        // If the user cancelled, we want to return\n        if (e.target.files.length === 0) { return; }\n        // Get the first file\n        const file = e.target.files[0];\n        // Create a FileReader\n        const reader = new FileReader();\n\n        // Uncomment the following lines to check the filesize before loading the image\n\n        // let size = file.size/1024/1024;\n        // if (size > 5) {\n        //     alert('Images larger than 5MB are not accepted.');\n        //     return;\n        // }\n\n        // Set the onload event handler\n        reader.onload = (f) => {\n            // Get the result\n            let data = f.target.result;\n            // Create an image from the data we got back\n            fabric.Image.fromURL(data, (img) => {\n                let aspect = 0;\n                let fabricImage = null;\n                const imageProps = {\n                    left: 0,\n                    top: 0,\n                    originX: 'left',\n                    originY: 'top',\n                    angle: 0\n                };\n                let props = {};\n                // Landscape image\n                if (img.width > img.height) {\n                    // Set the aspect\n                    aspect = img.width / img.height;\n                    // Set the props\n                    props = Object.assign(imageProps, {\n                        width: 1,\n                        height: 1 / aspect\n                    });\n                } else { // Portrait image\n                    // Set the aspect\n                    aspect = img.height / img.width;\n                    // Set the props\n                    props = Object.assign(imageProps, {\n                        width: 1 / aspect,\n                        height: 1\n                    })\n                }\n                // Assign the props to the fabric image\n                fabricImage = img.set(props);\n                // Callback\n                callback(fabricImage);\n            });\n        };\n        // Start the reader\n        reader.readAsDataURL(file);\n        // Reset the input[type=\"file\"]\n        $(e.currentTarget).val('');\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/UploadHelper.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c33df0da\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c33df0da\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","import Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/* global fabric */\nconst STATE_IDLE = 'idle';\nconst STATE_PANNING = 'panning';\nfabric.Canvas.prototype.toggleDragMode = function(dragMode) {\n    // Remember the previous X and Y coordinates for delta calculations\n    let lastClientX;\n    let lastClientY;\n    // Keep track of the state\n    let state = STATE_IDLE;\n    // We're entering dragmode\n    if (dragMode) {\n        // Discard any active object\n        this.discardActiveObject();\n        // Set the cursor to 'move'\n        this.defaultCursor = 'move';\n        // Loop over all objects and disable events / selectable. We remember its value in a temp variable stored on each object\n        this.forEachObject(function(object) {\n            object.prevEvented = object.evented;\n            object.prevSelectable = object.selectable;\n            object.evented = false;\n            object.selectable = false;\n        });\n        // Remove selection ability on the canvas\n        this.selection = false;\n        // When MouseUp fires, we set the state to idle\n        this.on('mouse:up', function (e) {\n            state = STATE_IDLE;\n        });\n        // When MouseDown fires, we set the state to panning\n        this.on('mouse:down', (e) => {\n            state = STATE_PANNING;\n            lastClientX = e.e.clientX;\n            lastClientY = e.e.clientY;\n        });\n        // When the mouse moves, and we're panning (mouse down), we continue\n        this.on('mouse:move', (e) => {\n            if (state === STATE_PANNING && e && e.e) {\n                // let delta = new fabric.Point(e.e.movementX, e.e.movementY); // No Safari support for movementX and movementY\n                // For cross-browser compatibility, I had to manually keep track of the delta\n\n                // Calculate deltas\n                let deltaX = 0;\n                let deltaY = 0;\n                if (lastClientX) {\n                    deltaX = e.e.clientX - lastClientX;\n                }\n                if (lastClientY) {\n                    deltaY = e.e.clientY - lastClientY;\n                }\n                // Update the last X and Y values\n                lastClientX = e.e.clientX;\n                lastClientY = e.e.clientY;\n\n                let delta = new fabric.Point(deltaX, deltaY);\n                this.relativePan(delta);\n                this.trigger('moved');\n            }\n        });\n    } else {\n        // When we exit dragmode, we restore the previous values on all objects\n        this.forEachObject(function(object) {\n            object.evented = (object.prevEvented !== undefined) ? object.prevEvented : object.evented;\n            object.selectable = (object.prevSelectable !== undefined) ? object.prevSelectable : object.selectable;\n        });\n        // Reset the cursor\n        this.defaultCursor = 'default';\n        // Remove the event listeners\n        this.off('mouse:up');\n        this.off('mouse:down');\n        this.off('mouse:move');\n        // Restore selection ability on the canvas\n        this.selection = true;\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Panning.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('github-corners',{attrs:{\"repo\":\"SabatinoMasala/fabric-clipping-demo\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\",attrs:{\"id\":\"toolbar\"}},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomIn($event)}}},[_vm._v(\"Zoom in\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomOut($event)}}},[_vm._v(\"Zoom out\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),(!_vm.dragMode)?_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = true}}},[_vm._v(\"Start panning\")]):_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = false}}},[_vm._v(\"Stop panning\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.reset()}}},[_vm._v(\"Reset pan & zoom\")]),_vm._v(\" \"),(_vm.activeObject)?_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.activeObject)?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.removeActiveObject()}}},[_vm._v(\"Delete object\")]):_vm._e()]),_vm._v(\" \"),_c('h1',{staticClass:\"text-center heading\"},[_vm._v(\"Fabric.js clipping & panning demo\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"wrapper\"},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"500\",\"height\":\"500\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[(_vm.helpMessage)?_c('p',{staticClass:\"help\"},[_vm._v(_vm._s(_vm.helpMessage))]):_vm._e()])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c33df0da\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = lyur\n// module chunks = 1","import $ from 'jquery'\nimport UploadHelper from '../helpers/UploadHelper'\nexport default class {\n    constructor(canvas, userOptions = {}) {\n        // Set some defaults\n        let defaults = {\n            originX: 'left',\n            originY: 'top',\n            fill: '#FF8552',\n            strokeWidth: 0,\n            selectable: false,\n            evented: false,\n        };\n        // Overwrite the defaults with the user options\n        let options = Object.assign(defaults, userOptions);\n        // Keep track of the state\n        this.state = {\n            hasImage: false\n        };\n        // Store some instance variables\n        this.canvas = canvas;\n        this.clipRect = new fabric.Rect(options);\n        // Events\n        this.clipRect.on('moving', _ => {\n            this._positionButton();\n        });\n        this.canvas.on('moved', _ => {\n            this._positionButton();\n        });\n\n        // Input upload\n        this.inputUpload = document.createElement('input');\n        this.inputUpload.type = 'file';\n        document.body.append(this.inputUpload);\n\n        // Button\n        this.btnUpload = document.createElement('button');\n        this.btnUpload.innerHTML = 'Upload';\n        this.btnUpload.style.position = 'absolute';\n        $('.canvas-container').append(this.btnUpload);\n\n        // DOM Events\n        $(this.btnUpload).click(this._onClickButtonUpload.bind(this));\n        $(this.inputUpload).change(this._handleUpload.bind(this));\n    }\n    _handleUpload(e) {\n        UploadHelper.handleEvent(e, (fabricImage) => {\n            this._loadImage(fabricImage)\n        });\n    }\n    _loadImage(fabricImage) {\n        // Store a reference to this\n        let _this = this;\n        // Set values on the image\n        fabricImage.set({\n            left: this.clipRect.left,\n            top: this.clipRect.top,\n            width: fabricImage.width * this.clipRect.width,\n            height: fabricImage.height * this.clipRect.width,\n            clipTo(ctx) {\n                // Get the viewport absolute panning X and Y\n                let panLeft = this.canvas.viewportTransform[4];\n                let panTop = this.canvas.viewportTransform[5];\n                this.setCoords();\n                ctx.save();\n                // Reset the context\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                // Start drawing\n                ctx.beginPath();\n                // Get the values\n                ctx.rect(\n                    _this._zoom(_this.clipRect.left) + _this._multiplied(panLeft),\n                    _this._zoom(_this.clipRect.top) + _this._multiplied(panTop),\n                    _this._zoom(_this.clipRect.width),\n                    _this._zoom(_this.clipRect.height)\n                );\n                // Stop drawing\n                ctx.closePath();\n                // Restore\n                ctx.restore();\n            }\n        });\n        // Events on the image\n        fabricImage.on('removed', (e) => {\n            this._setState({\n                hasImage: false\n            })\n        });\n        // Add the image to the canvas\n        this.canvas.add(fabricImage).renderAll();\n        // Set the active image\n        this.canvas.setActiveObject(fabricImage);\n        // Update the state\n        this._setState({\n            hasImage: true\n        })\n    }\n    // Helper method to convert degrees to radians\n    _degToRad(degrees) {\n        return degrees * (Math.PI / 180);\n    }\n    // Update the current state\n    _setState(state) {\n        // Overwrite the state\n        this.state = Object.assign(this.state, state);\n        // If we have no image, we show the upload button\n        if (!this.state.hasImage) {\n            $(this.btnUpload).show();\n            this._positionButton();\n        } else { // If we have an image, we hide the upload button\n            $(this.btnUpload).hide();\n        }\n    }\n    // Click handler for the upload button\n    _onClickButtonUpload(e) {\n        // We trigger the click event on the upload input\n        $(this.inputUpload).trigger('click');\n    }\n    // Helper method to get the position of the canvas element\n    _getDomCanvasPosition() {\n        return $(this.canvas.upperCanvasEl).offset();\n    }\n    // When we're on retina displays (iPad/MBP) the devicePixelRatio isn't 1, we have to multiply values manually\n    _multiplied(value) {\n        return fabric.window.devicePixelRatio * value;\n    }\n    // Get the canvas zoom and multiply the given value, dom elements don't need the multiplication with devicePixelRatio\n    _zoom(value, needsDevicePixelRatio = true) {\n        const multiplier = this.canvas.getZoom() * (needsDevicePixelRatio ? fabric.window.devicePixelRatio : 1); // Retina ready!\n        return value * multiplier;\n    }\n    // Position the upload button\n    _positionButton() {\n        // Get canvas position in the dom\n        let domCanvasPos = this._getDomCanvasPosition();\n        // Get the absolute panned values of the canvas\n        let panLeft = this.canvas.viewportTransform[4];\n        let panTop = this.canvas.viewportTransform[5];\n        // Dom doesn't need correction for retina displays\n        let objectPos = {\n            top: this._zoom(this.clipRect.top, false),\n            left: this._zoom(this.clipRect.left, false),\n            width: this._zoom(this.clipRect.width, false),\n            height: this._zoom(this.clipRect.height, false),\n        };\n        // Get the button size\n        let domButtonSize = {\n            width: $(this.btnUpload).outerWidth(),\n            height: $(this.btnUpload).outerHeight(),\n        };\n        // Set the offset on the upload button\n        $(this.btnUpload).offset({\n            top: objectPos.top + objectPos.height / 2 + panTop - domButtonSize.height / 2 + domCanvasPos.top,\n            left: objectPos.left + objectPos.width / 2 + panLeft - domButtonSize.width / 2 + domCanvasPos.left,\n        })\n    }\n    // Public method to add the cliprect to the canvas\n    render() {\n        // Add the cliprect to the canvas\n        this.canvas.add(this.clipRect).renderAll();\n        // Reposition the button\n        this._positionButton();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/ClipRect.js","<template>\n    <div>\n        <github-corners repo=\"SabatinoMasala/fabric-clipping-demo\"></github-corners>\n        <div id=\"toolbar\" class=\"text-center\">\n            <button @click.stop.prevent=\"zoomIn\">Zoom in</button>\n            <button @click.stop.prevent=\"zoomOut\">Zoom out</button>\n            <div class=\"spacer\">&nbsp;</div>\n            <button @click.stop.prevent=\"dragMode = true\" v-if=\"!dragMode\">Start panning</button>\n            <button @click.stop.prevent=\"dragMode = false\" v-else>Stop panning</button>\n            <div class=\"spacer\">&nbsp;</div>\n            <button @click.stop.prevent=\"reset()\">Reset pan & zoom</button>\n            <div class=\"spacer\" v-if=\"activeObject\">&nbsp;</div>\n            <button class=\"delete\" @click.stop.prevent=\"removeActiveObject()\" v-if=\"activeObject\">Delete object</button>\n        </div>\n        <h1 class=\"text-center heading\">Fabric.js clipping & panning demo</h1>\n        <div id=\"app\">\n            <div class=\"wrapper\">\n                <canvas id=\"canvas\" width=\"500\" height=\"500\"></canvas>\n                <div class=\"text-center\">\n                    <p class=\"help\" v-if=\"helpMessage\">{{ helpMessage }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import Vue from 'vue';\n    import VueGitHubCorners from 'vue-gh-corners';\n    import 'vue-gh-corners/dist/vue-github-corners.css';\n    Vue.use(VueGitHubCorners);\n    import $ from 'jquery'\n    import ClipRect from './classes/ClipRect'\n    import Panning from './classes/Panning'\n    export default {\n        name: 'fabric-clipping-demo',\n        computed: {\n            // Generate helpful messages to help the user\n            helpMessage() {\n                if (this.activeObject) {\n                    return 'Press backspace to delete the object';\n                }\n                if (this.dragMode) {\n                    return 'Drag the canvas to pan';\n                }\n                return false;\n            }\n        },\n        methods: {\n            // Remove the active object\n            removeActiveObject() {\n                this.activeObject.remove();\n                this.canvas.renderAll();\n            },\n            // Reset to initial values\n            reset() {\n                this.canvas.setZoom(1);\n                this.canvas.absolutePan(\n                    new fabric.Point(0, 0)\n                );\n                this.dragMode = false;\n                this.canvas.trigger('moved');\n            },\n            // Zoom in handler\n            zoomIn() {\n                this.canvas.setZoom(this.canvas.getZoom() + 0.2);\n                this.canvas.trigger('moved');\n            },\n            // Zoom out handler\n            zoomOut() {\n                this.canvas.setZoom(this.canvas.getZoom() - 0.2);\n                this.canvas.trigger('moved');\n            }\n        },\n        watch: {\n            // Dragmode watcher, this will toggle the dragmode on the canvas whenever the 'dragMode' variable changes\n            dragMode() {\n                this.canvas.toggleDragMode(this.dragMode);\n            }\n        },\n        mounted() {\n\n            // Grid variables\n            const numberOfRows = 3;\n            const numberOfCols = 3;\n            const gridWidth = 250;\n            const spacer = 1;\n\n            // Create the canvas\n            this.canvas = new fabric.Canvas('canvas');\n            this.canvas.backgroundColor = '#fff';\n\n            // Listen to some events\n            this.canvas.on('object:selected', e => {\n                this.activeObject = e.target;\n            });\n            this.canvas.on('selection:cleared', _ => {\n                this.activeObject = false;\n            });\n\n            // Create the grid\n            for (let i = 0; i < numberOfRows; i++) {\n                for (let j = 0; j < numberOfCols; j++) {\n                    // Create the cliprect objects on the grid\n                    let clipRect = new ClipRect(this.canvas, {\n                        left: j * (gridWidth + spacer),\n                        top: i * (gridWidth + spacer),\n                        width: (gridWidth - spacer),\n                        height: (gridWidth - spacer)\n                    });\n                    // Render it!\n                    clipRect.render();\n                }\n            }\n\n            // I didn't use Vue key bindings for the sake of this example\n            const KEY_BACKSPACE = 8;\n            $('body').keydown((e) => {\n                if (e.keyCode === KEY_BACKSPACE) {\n                    // Get the object and delete it if we have one\n                    const obj = this.canvas.getActiveObject();\n                    if (obj) {\n                        obj.remove(); // This will trigger 'removed' on the image\n                        this.canvas.renderAll();\n                    }\n                }\n            });\n\n        },\n        data() {\n            return {\n                canvasVisible: true,\n                activeObject: false,\n                canvas: false,\n                dragMode: false\n            }\n        }\n    }\n</script>\n<style lang=\"scss\">\n    $colorPrimary: #fff;\n    $colorDelete: #D64933;\n    $colorText: #2B303A;\n    $colorBg: #92DCE5;\n    * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n    body {\n        background-color: $colorBg;\n        font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif;\n        color: $colorText;\n    }\n    .help {\n        display: inline-block;\n        padding: 10px;\n        background-color: $colorPrimary;\n    }\n    .heading {\n        padding-top: 100px;\n    }\n    #toolbar {\n        background-color: $colorPrimary;\n        padding: 10px;\n        z-index: 999;\n        .spacer {\n            display: inline-block;\n            width: 20px;\n        }\n        button.delete {\n            background-color: $colorDelete;\n            color: #fff;\n        }\n    }\n    button {\n        border: 0;\n        background-color: $colorText;\n        color: $colorPrimary;\n        cursor: pointer;\n        padding: 10px;\n    }\n    .text-center {\n        text-align: center;\n    }\n    .canvas-container {\n        border: 2px $colorPrimary solid;\n        overflow: hidden;\n        margin: 50px auto;\n    }\n    input[type=file] {\n        position: absolute;\n        opacity: 0;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}