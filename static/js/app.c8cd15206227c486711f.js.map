{"version":3,"sources":["webpack:///static/js/app.c8cd15206227c486711f.js","webpack:///./src/helpers/UploadHelper.js","webpack:///./src/components/GithubCorner.vue?d771","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/classes/Panning.js","webpack:///./src/App.vue?d621","webpack:///src/components/GithubCorner.vue","webpack:///./src/classes/ClipRect.js","webpack:///src/App.vue","webpack:///./src/components/GithubCorner.vue"],"names":["webpackJsonp","05jh","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","n","__WEBPACK_IMPORTED_MODULE_1_jquery__","__WEBPACK_IMPORTED_MODULE_1_jquery___default","handleEvent","e","callback","target","files","length","file","reader","FileReader","onload","f","data","result","fabric","Image","fromURL","img","aspect","fabricImage","imageProps","left","top","originX","originY","angle","props","width","height","set","readAsDataURL","currentTarget","val","7iRb","exports","8ZN9","HQ6e","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","href","url","aria-label","staticStyle","fill","color","position","border","right","viewBox","aria-hidden","d","transform-origin","staticRenderFns","esExports","M93x","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","__vue_styles__","Component","NHnr","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","config","productionTip","el","h","f384","Canvas","prototype","toggleDragMode","dragMode","_this","lastClientX","lastClientY","state","discardActiveObject","defaultCursor","forEachObject","object","prevEvented","evented","prevSelectable","selectable","selection","on","clientX","clientY","deltaX","deltaY","delta","Point","relativePan","trigger","undefined","off","lyur","_v","id","click","$event","stopPropagation","preventDefault","zoomIn","zoomOut","reset","_e","removeActiveObject","_s","helpMessage","oo+B","String","wuSQ","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_3_jquery__","__WEBPACK_IMPORTED_MODULE_3_jquery___default","__WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__","_class","canvas","_this2","userOptions","arguments","defaults","strokeWidth","options","hasImage","clipRect","Rect","_","_positionButton","inputUpload","document","createElement","type","body","append","btnUpload","innerHTML","style","_onClickButtonUpload","bind","change","_handleUpload","key","_this3","_loadImage","_this4","clipTo","ctx","panLeft","viewportTransform","panTop","setCoords","save","setTransform","beginPath","rect","_zoom","_multiplied","closePath","restore","_setState","add","renderAll","setActiveObject","degrees","Math","PI","hide","show","upperCanvasEl","offset","window","devicePixelRatio","needsDevicePixelRatio","getZoom","domCanvasPos","_getDomCanvasPosition","objectPos","domButtonSize","outerWidth","outerHeight","xJD8","__WEBPACK_IMPORTED_MODULE_0__components_GithubCorner__","__WEBPACK_IMPORTED_MODULE_2__classes_ClipRect__","__WEBPACK_IMPORTED_MODULE_3__classes_Panning__","name","components","GithubCorner","computed","activeObject","methods","remove","setZoom","absolutePan","watch","mounted","backgroundColor","i","j","gridWidth","keydown","keyCode","obj","getActiveObject","canvasVisible","zNFg","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GithubCorner_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4a59b723_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GithubCorner_vue__"],"mappings":"AAAAA,cAAc,IAERC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACqB,IAAIC,GAAoED,EAAoB,QACxFE,EAA4EF,EAAoBG,EAAEF,GAClGG,EAAuCJ,EAAoB,QAC3DK,EAA+CL,EAAoBG,EAAEC,ECP9FL,GAAA,GACIO,YADW,SACCC,EAAGC,GAGX,GAA8B,IAA1BD,EAAEE,OAAOC,MAAMC,OAAnB,CAEA,GAAMC,GAAOL,EAAEE,OAAOC,MAAM,GAEtBG,EAAS,GAAIC,WAWnBD,GAAOE,OAAS,SAACC,GAEb,GAAIC,GAAOD,EAAEP,OAAOS,MAEpBC,QAAOC,MAAMC,QAAQJ,EAAM,SAACK,GACxB,GAAIC,GAAS,EACTC,EAAc,KACZC,GACFC,KAAM,EACNC,IAAK,EACLC,QAAS,OACTC,QAAS,MACTC,MAAO,GAEPC,IAEAT,GAAIU,MAAQV,EAAIW,QAEhBV,EAASD,EAAIU,MAAQV,EAAIW,OAEzBF,EAAQ7B,IAAcuB,GAClBO,MAAO,EACPC,OAAQ,EAAIV,MAIhBA,EAASD,EAAIW,OAASX,EAAIU,MAE1BD,EAAQ7B,IAAcuB,GAClBO,MAAO,EAAIT,EACXU,OAAQ,KAIhBT,EAAcF,EAAIY,IAAIH,GAEtBvB,EAASgB,MAIjBX,EAAOsB,cAAcvB,GAErBP,IAAEE,EAAE6B,eAAeC,IAAI,QDoBzBC,OACA,SAAUxC,EAAQyC,KAMlBC,OACA,SAAU1C,EAAQyC,KAMlBE,KACA,SAAU3C,EAAQC,EAAqBC,GAE7C,YEpGA,IAAA0C,GAAA,WAA0B,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,KAAeE,YAAA,gBAAAC,OAAmCzC,OAAA,SAAA0C,KAAAR,EAAAS,IAAAC,aAAA,2BAAuEN,EAAA,OAAYO,aAAaC,KAAA,UAAAC,MAAA,OAAAC,SAAA,WAAA9B,IAAA,IAAA+B,OAAA,IAAAC,MAAA,KAAyFT,OAAQlB,MAAA,KAAAC,OAAA,KAAA2B,QAAA,cAAAC,cAAA,UAAyEd,EAAA,QAAaG,OAAOY,EAAA,uDAAyDf,EAAA,QAAaE,YAAA,WAAAK,aAAoCS,mBAAA,eAAiCb,OAAQY,EAAA,2LAAAP,KAAA,kBAAsNR,EAAA,QAAaE,YAAA,YAAAC,OAA+BY,EAAA,shBAAAP,KAAA,uBAC9zBS,KACAC,GAAiBvB,SAAAsB,kBACjBjE,GAAA,KFyGMmE,KACA,SAAUpE,EAAQC,EAAqBC,GAE7C,YG/GA,SAAAmE,GAAAC,GACApE,EAAA,QH+GqB,GAAIqE,GAA+GrE,EAAoB,QGhH5JsE,EAAAtE,EAAA,QAGAuE,EAAAvE,EAAA,QAQAwE,EAAAL,EAKAM,EAAAF,EACAF,EAAA,EACAC,EAAA,GATA,EAWAE,EAPA,KAEA,KAUAzE,GAAA,EAAA0E,EAAA,SHuHMC,KACA,SAAU5E,EAAQC,EAAqBC,GAE7C,YACA2E,QAAOC,eAAe7E,EAAqB,cAAgB8E,OAAO,GAC7C,IAAIC,GAAoC9E,EAAoB,QACxD+E,EAAqC/E,EAAoB,OInJlF8E,GAAA,EAAIE,OAAOC,eAAgB,EAG3B,GAAIH,GAAA,GACFI,GAAI,OACJxC,OAAQ,SAAAyC,GAAA,MAAKA,GAAEJ,EAAA,OJ8JXK,KACA,SAAUtF,EAAQyC,GKpKxBpB,OAAOkE,OAAOC,UAAUC,eAAiB,SAASC,GAAU,GAAAC,GAAA7C,KAEpD8C,SACAC,SAEAC,EAPW,MASXJ,IAEA5C,KAAKiD,sBAELjD,KAAKkD,cAAgB,OAErBlD,KAAKmD,cAAc,SAASC,GACxBA,EAAOC,YAAcD,EAAOE,QAC5BF,EAAOG,eAAiBH,EAAOI,WAC/BJ,EAAOE,SAAU,EACjBF,EAAOI,YAAa,IAGxBxD,KAAKyD,WAAY,EAEjBzD,KAAK0D,GAAG,WAAY,SAAU/F,GAC1BqF,EAzBO,SA4BXhD,KAAK0D,GAAG,aAAc,SAAC/F,GACnBqF,EA5BU,UA6BVF,EAAcnF,EAAEA,EAAEgG,QAClBZ,EAAcpF,EAAEA,EAAEiG,UAGtB5D,KAAK0D,GAAG,aAAc,SAAC/F,GACnB,GAlCU,YAkCNqF,GAA2BrF,GAAKA,EAAEA,EAAG,CAKrC,GAAIkG,GAAS,EACTC,EAAS,CACThB,KACAe,EAASlG,EAAEA,EAAEgG,QAAUb,GAEvBC,IACAe,EAASnG,EAAEA,EAAEiG,QAAUb,GAG3BD,EAAcnF,EAAEA,EAAEgG,QAClBZ,EAAcpF,EAAEA,EAAEiG,OAElB,IAAIG,GAAQ,GAAIxF,QAAOyF,MAAMH,EAAQC,EACrCjB,GAAKoB,YAAYF,GACjBlB,EAAKqB,QAAQ,cAKrBlE,KAAKmD,cAAc,SAASC,GACxBA,EAAOE,YAAkCa,KAAvBf,EAAOC,YAA6BD,EAAOC,YAAcD,EAAOE,QAClFF,EAAOI,eAAwCW,KAA1Bf,EAAOG,eAAgCH,EAAOG,eAAiBH,EAAOI,aAG/FxD,KAAKkD,cAAgB,UAErBlD,KAAKoE,IAAI,YACTpE,KAAKoE,IAAI,cACTpE,KAAKoE,IAAI,cAETpE,KAAKyD,WAAY,KLiLnBY,KACA,SAAUnH,EAAQC,EAAqBC,GAE7C,YM3PA,IAAA0C,GAAA,WAA0B,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAAA,EAAA,gBAAoCG,OAAOE,IAAA,4DAAgET,EAAAuE,GAAA,KAAAnE,EAAA,OAAwBE,YAAA,cAAAC,OAAiCiE,GAAA,aAAgBpE,EAAA,UAAeuD,IAAIc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAA6E,OAAAH,OAAqB1E,EAAAuE,GAAA,aAAAvE,EAAAuE,GAAA,KAAAnE,EAAA,UAA+CuD,IAAIc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAA8E,QAAAJ,OAAsB1E,EAAAuE,GAAA,cAAAvE,EAAAuE,GAAA,KAAAnE,EAAA,OAA6CE,YAAA,WAAqBN,EAAAuE,GAAA,OAAAvE,EAAAuE,GAAA,KAAAvE,EAAA6C,SAA6JzC,EAAA,UAAyCuD,IAAIc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAA6C,UAAA,MAAuB7C,EAAAuE,GAAA,kBAA3SnE,EAAA,UAAyDuD,IAAIc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAA6C,UAAA,MAAsB7C,EAAAuE,GAAA,mBAA8IvE,EAAAuE,GAAA,KAAAnE,EAAA,OAAiDE,YAAA,WAAqBN,EAAAuE,GAAA,OAAAvE,EAAAuE,GAAA,KAAAnE,EAAA,UAAyCuD,IAAIc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAA+E,YAAc/E,EAAAuE,GAAA,sBAAAvE,EAAAuE,GAAA,KAAAvE,EAAA,aAAAI,EAAA,OAAwEE,YAAA,WAAqBN,EAAAuE,GAAA,OAAAvE,EAAAgF,KAAAhF,EAAAuE,GAAA,KAAAvE,EAAA,aAAAI,EAAA,UAAqEE,YAAA,SAAAqD,IAAyBc,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwB5E,EAAAiF,yBAA2BjF,EAAAuE,GAAA,mBAAAvE,EAAAgF,OAAAhF,EAAAuE,GAAA,KAAAnE,EAAA,MAA4DE,YAAA,wBAAkCN,EAAAuE,GAAA,uCAAAvE,EAAAuE,GAAA,KAAAnE,EAAA,OAAsEG,OAAOiE,GAAA,SAAYpE,EAAA,OAAYE,YAAA,YAAsBF,EAAA,UAAeG,OAAOiE,GAAA,SAAAnF,MAAA,MAAAC,OAAA,SAA4CU,EAAAuE,GAAA,KAAAnE,EAAA,OAAwBE,YAAA,gBAA0BN,EAAA,YAAAI,EAAA,KAA4BE,YAAA,SAAmBN,EAAAuE,GAAAvE,EAAAkF,GAAAlF,EAAAmF,gBAAAnF,EAAAgF,YAAA,IACtuD3D,KACAC,GAAiBvB,SAAAsB,kBACjBjE,GAAA,KNgQMgI,OACA,SAAUjI,EAAQC,EAAqBC,GAE7C,YOrOAD,GAAA,GPwQIgC,OACIqB,IOrQR4E,UP2QMC,KACA,SAAUnI,EAAQC,EAAqBC,GAE7C,YACqB,IAAIC,GAAoED,EAAoB,QACxFE,EAA4EF,EAAoBG,EAAEF,GAClGiI,EAAqElI,EAAoB,QACzFmI,EAA6EnI,EAAoBG,EAAE+H,GACnGE,EAAkEpI,EAAoB,QACtFqI,EAA0ErI,EAAoBG,EAAEiI,GAChGE,EAAuCtI,EAAoB,QAC3DuI,EAA+CvI,EAAoBG,EAAEmI,GACrEE,EAAsDxI,EAAoB,QAO/FyI,EAAS,WQhUT,QAAAA,GAAYC,GAA0B,GAAAC,GAAA/F,KAAlBgG,EAAkBC,UAAAlI,OAAA,OAAAoG,KAAA8B,UAAA,GAAAA,UAAA,KAAAV,KAAAvF,KAAA6F,EAElC,IAAIK,IACAlH,QAAS,OACTC,QAAS,MACT0B,KAAM,UACNwF,YAAa,EACb3C,YAAY,EACZF,SAAS,GAGT8C,EAAU9I,IAAc4I,EAAUF,EAEtChG,MAAKgD,OACDqD,UAAU,GAGdrG,KAAK8F,OAASA,EACd9F,KAAKsG,SAAW,GAAI/H,QAAOgI,KAAKH,GAEhCpG,KAAKsG,SAAS5C,GAAG,SAAU,SAAA8C,GACvBT,EAAKU,oBAETzG,KAAK8F,OAAOpC,GAAG,QAAS,SAAA8C,GACpBT,EAAKU,oBAITzG,KAAK0G,YAAcC,SAASC,cAAc,SAC1C5G,KAAK0G,YAAYG,KAAO,OACxBF,SAASG,KAAKC,OAAO/G,KAAK0G,aAG1B1G,KAAKgH,UAAYL,SAASC,cAAc,UACxC5G,KAAKgH,UAAUC,UAAY,SAC3BjH,KAAKgH,UAAUE,MAAMrG,SAAW,WAChC8E,IAAE,qBAAqBoB,OAAO/G,KAAKgH,WAGnCrB,IAAE3F,KAAKgH,WAAWxC,MAAMxE,KAAKmH,qBAAqBC,KAAKpH,OACvD2F,IAAE3F,KAAK0G,aAAaW,OAAOrH,KAAKsH,cAAcF,KAAKpH,ORgevD,MAtJAyF,KAA0EI,IACtE0B,IAAK,gBACLtF,MAAO,SQ1UGtE,GAAG,GAAA6J,GAAAxH,IACb4F,GAAA,EAAalI,YAAYC,EAAG,SAACiB,GACzB4I,EAAKC,WAAW7I,QRgVpB2I,IAAK,aACLtF,MAAO,SQ9UArD,GAAa,GAAA8I,GAAA1H,KAEhB6C,EAAQ7C,IAEZpB,GAAYU,KACRR,KAAMkB,KAAKsG,SAASxH,KACpBC,IAAKiB,KAAKsG,SAASvH,IACnBK,MAAOR,EAAYQ,MAAQY,KAAKsG,SAASlH,MACzCC,OAAQT,EAAYS,OAASW,KAAKsG,SAASlH,MAC3CuI,OALY,SAKLC,GAEH,GAAIC,GAAU7H,KAAK8F,OAAOgC,kBAAkB,GACxCC,EAAS/H,KAAK8F,OAAOgC,kBAAkB,EAC3C9H,MAAKgI,YACLJ,EAAIK,OAEJL,EAAIM,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAEhCN,EAAIO,YAEJP,EAAIQ,KACAvF,EAAMwF,MAAMxF,EAAMyD,SAASxH,MAAQ+D,EAAMyF,YAAYT,GACrDhF,EAAMwF,MAAMxF,EAAMyD,SAASvH,KAAO8D,EAAMyF,YAAYP,GACpDlF,EAAMwF,MAAMxF,EAAMyD,SAASlH,OAC3ByD,EAAMwF,MAAMxF,EAAMyD,SAASjH,SAG/BuI,EAAIW,YAEJX,EAAIY,aAIZ5J,EAAY8E,GAAG,UAAW,SAAC/F,GACvB+J,EAAKe,WACDpC,UAAU,MAIlBrG,KAAK8F,OAAO4C,IAAI9J,GAAa+J,YAE7B3I,KAAK8F,OAAO8C,gBAAgBhK,GAE5BoB,KAAKyI,WACDpC,UAAU,ORiVdkB,IAAK,YACLtF,MAAO,SQ9UD4G,GACN,MAAOA,IAAWC,KAAKC,GAAK,QRmV5BxB,IAAK,YACLtF,MAAO,SQjVDe,GAENhD,KAAKgD,MAAQ1F,IAAc0C,KAAKgD,MAAOA,GAElChD,KAAKgD,MAAMqD,SAIZV,IAAE3F,KAAKgH,WAAWgC,QAHlBrD,IAAE3F,KAAKgH,WAAWiC,OAClBjJ,KAAKyG,sBR0VTc,IAAK,uBACLtF,MAAO,SQrVUtE,GAEjBgI,IAAE3F,KAAK0G,aAAaxC,QAAQ,YR0V5BqD,IAAK,wBACLtF,MAAO,WQvVP,MAAO0D,KAAE3F,KAAK8F,OAAOoD,eAAeC,YR6VpC5B,IAAK,cACLtF,MAAO,SQ3VCA,GACR,MAAO1D,QAAO6K,OAAOC,iBAAmBpH,KRgWxCsF,IAAK,QACLtF,MAAO,SQ9VLA,GAAqC,GAA9BqH,KAA8BrD,UAAAlI,OAAA,OAAAoG,KAAA8B,UAAA,KAAAA,UAAA,EAEvC,OAAOhE,IADYjC,KAAK8F,OAAOyD,WAAaD,EAAwB/K,OAAO6K,OAAOC,iBAAmB,ORsWrG9B,IAAK,kBACLtF,MAAO,WQjWP,GAAIuH,GAAexJ,KAAKyJ,wBAEpB5B,EAAU7H,KAAK8F,OAAOgC,kBAAkB,GACxCC,EAAS/H,KAAK8F,OAAOgC,kBAAkB,GAEvC4B,GACA3K,IAAKiB,KAAKqI,MAAMrI,KAAKsG,SAASvH,KAAK,GACnCD,KAAMkB,KAAKqI,MAAMrI,KAAKsG,SAASxH,MAAM,GACrCM,MAAOY,KAAKqI,MAAMrI,KAAKsG,SAASlH,OAAO,GACvCC,OAAQW,KAAKqI,MAAMrI,KAAKsG,SAASjH,QAAQ,IAGzCsK,GACAvK,MAAOuG,IAAE3F,KAAKgH,WAAW4C,aACzBvK,OAAQsG,IAAE3F,KAAKgH,WAAW6C,cAG9BlE,KAAE3F,KAAKgH,WAAWmC,QACdpK,IAAK2K,EAAU3K,IAAM2K,EAAUrK,OAAS,EAAI0I,EAAS4B,EAActK,OAAS,EAAImK,EAAazK,IAC7FD,KAAM4K,EAAU5K,KAAO4K,EAAUtK,MAAQ,EAAIyI,EAAU8B,EAAcvK,MAAQ,EAAIoK,EAAa1K,URyWlGyI,IAAK,SACLtF,MAAO,WQpWPjC,KAAK8F,OAAO4C,IAAI1I,KAAKsG,UAAUqC,YAE/B3I,KAAKyG,sBR0WFZ,IAGkB1I,GAAuB,EAAI,GAIlD2M,KACA,SAAU5M,EAAQC,EAAqBC,GAE7C,YACqB,IAAI2M,GAAyD3M,EAAoB,QAC7EI,EAAuCJ,EAAoB,QAC3DK,EAA+CL,EAAoBG,EAAEC,GACrEwM,EAAkD5M,EAAoB,QACtE6M,EAAiD7M,EAAoB,OACZA,GAAoBG,EAAE0M,ES5fxG9M,GAAA,GT6hBI+M,KS3hBJ,uBT4hBIC,YSzhBJC,aAAAL,EAAA,GT4hBIM,UAEInF,YAAa,WACT,MAAIlF,MAAKsK,aS1hBrB,yCT6hBgBtK,KAAK4C,US1hBrB,2BTgiBI2H,SAEIvF,mBAAoB,WAChBhF,KAAKsK,aS3hBjBE,ST4hBYxK,KAAK8F,OS3hBjB6C,aT+hBQ7D,MAAO,WACH9E,KAAK8F,OAAO2E,QS5hBxB,GT6hBYzK,KAAK8F,OS5hBjB4E,YAAA,GAAAnM,QAAAyF,MAAA,EAEA,IT2hBYhE,KAAK4C,US1hBjB,ET2hBY5C,KAAK8F,OAAO5B,QS1hBxB,UT8hBQU,OAAQ,WACJ5E,KAAK8F,OAAO2E,QAAQzK,KAAK8F,OAAOyD,US3hB5C,IT4hBYvJ,KAAK8F,OAAO5B,QS3hBxB,UT+hBQW,QAAS,WACL7E,KAAK8F,OAAO2E,QAAQzK,KAAK8F,OAAOyD,US5hB5C,IT6hBYvJ,KAAK8F,OAAO5B,QS5hBxB,WT+hBIyG,OAEI/H,SAAU,WACN5C,KAAK8F,OAAOnD,eAAe3C,KS5hBvC4C,YT+hBIgI,QAAS,WS3hBb,GAAA/H,GAAA7C,ITqiBQA,MAAK8F,OAAS,GAAIvH,QAAOkE,OS7hBjC,UT8hBQzC,KAAK8F,OAAO+E,gBS5hBpB,OT+hBQ7K,KAAK8F,OAAOpC,GAAG,kBAAmB,SAAU/F,GACxCkF,EAAMyH,aAAe3M,ES7hBjCE,ST+hBQmC,KAAK8F,OAAOpC,GAAG,oBAAqB,SAAU8C,GAC1C3D,EAAMyH,cS7hBlB,GTiiBQ,KAAK,GAAIQ,GAAI,EAAGA,ES/iBxB,ET+iB0CA,IAC9B,IAAK,GAAIC,GAAI,EAAGA,ES/iB5B,ET+iB8CA,IS7hB9C,CT+hBgB,GAAIzE,GAAW,GAAI0D,GAAiE,EAAEhK,KAAK8F,QACvFhH,KAAU,IAAJiM,EACNhM,IAAS,IAAJ+L,EACL1L,MAAO4L,IACP3L,OAAQ2L,KAGZ1E,GS7hBhBxG,STmiBQrC,IAA+C,QAAQwN,QAAQ,SAAUtN,GACrE,GS/hBZ,IT+hBgBA,EAAEuN,QS7hBlB,CT+hBgB,GAAIC,GAAMtI,EAAMiD,OS7hBhCsF,iBT8hBoBD,KACAA,EAAIX,SACJ3H,EAAMiD,OS7hB1B6C,iBTkiBItK,KAAM,WACF,OACIgN,eS5hBZ,ET6hBYf,cS5hBZ,ET6hBYxE,QS5hBZ,ET6hBYlD,US3hBZ,MTkiBM0I,KACA,SAAUpO,EAAQC,EAAqBC,GAE7C,YU7qBA,SAAAmE,GAAAC,GACApE,EAAA,QV6qBqB,GAAImO,GAAwHnO,EAAoB,QU9qBrKoO,EAAApO,EAAA,QAGAuE,EAAAvE,EAAA,QAQAwE,EAAAL,EAKAM,EAAAF,EACA4J,EAAA,EACAC,EAAA,GATA,EAWA5J,EAPA,kBAEA,KAUAzE,GAAA,EAAA0E,EAAA,WVqrBG","file":"static/js/app.c8cd15206227c486711f.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"05jh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);\n\n/* global fabric */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    handleEvent: function handleEvent(e, callback) {\n\n        // If the user cancelled, we want to return\n        if (e.target.files.length === 0) {\n            return;\n        }\n        // Get the first file\n        var file = e.target.files[0];\n        // Create a FileReader\n        var reader = new FileReader();\n\n        // Uncomment the following lines to check the filesize before loading the image\n\n        // let size = file.size/1024/1024;\n        // if (size > 5) {\n        //     alert('Images larger than 5MB are not accepted.');\n        //     return;\n        // }\n\n        // Set the onload event handler\n        reader.onload = function (f) {\n            // Get the result\n            var data = f.target.result;\n            // Create an image from the data we got back\n            fabric.Image.fromURL(data, function (img) {\n                var aspect = 0;\n                var fabricImage = null;\n                var imageProps = {\n                    left: 0,\n                    top: 0,\n                    originX: 'left',\n                    originY: 'top',\n                    angle: 0\n                };\n                var props = {};\n                // Landscape image\n                if (img.width > img.height) {\n                    // Set the aspect\n                    aspect = img.width / img.height;\n                    // Set the props\n                    props = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(imageProps, {\n                        width: 1,\n                        height: 1 / aspect\n                    });\n                } else {\n                    // Portrait image\n                    // Set the aspect\n                    aspect = img.height / img.width;\n                    // Set the props\n                    props = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(imageProps, {\n                        width: 1 / aspect,\n                        height: 1\n                    });\n                }\n                // Assign the props to the fabric image\n                fabricImage = img.set(props);\n                // Callback\n                callback(fabricImage);\n            });\n        };\n        // Start the reader\n        reader.readAsDataURL(file);\n        // Reset the input[type=\"file\"]\n        __WEBPACK_IMPORTED_MODULE_1_jquery___default()(e.currentTarget).val('');\n    }\n});\n\n/***/ }),\n\n/***/ \"7iRb\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"8ZN9\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"HQ6e\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"github-corner\",attrs:{\"target\":\"_blank\",\"href\":_vm.url,\"aria-label\":\"View source on Github\"}},[_c('svg',{staticStyle:{\"fill\":\"#151513\",\"color\":\"#fff\",\"position\":\"absolute\",\"top\":\"0\",\"border\":\"0\",\"right\":\"0\"},attrs:{\"width\":\"80\",\"height\":\"80\",\"viewBox\":\"0 0 250 250\",\"aria-hidden\":\"true\"}},[_c('path',{attrs:{\"d\":\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"}}),_c('path',{staticClass:\"octo-arm\",staticStyle:{\"transform-origin\":\"130px 106px\"},attrs:{\"d\":\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\",\"fill\":\"currentColor\"}}),_c('path',{staticClass:\"octo-body\",attrs:{\"d\":\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\",\"fill\":\"currentColor\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"lyur\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"7iRb\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c33df0da_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"/5sW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */]);\n  }\n});\n\n/***/ }),\n\n/***/ \"f384\":\n/***/ (function(module, exports) {\n\n/* global fabric */\nvar STATE_IDLE = 'idle';\nvar STATE_PANNING = 'panning';\nfabric.Canvas.prototype.toggleDragMode = function (dragMode) {\n    var _this = this;\n\n    // Remember the previous X and Y coordinates for delta calculations\n    var lastClientX = void 0;\n    var lastClientY = void 0;\n    // Keep track of the state\n    var state = STATE_IDLE;\n    // We're entering dragmode\n    if (dragMode) {\n        // Discard any active object\n        this.discardActiveObject();\n        // Set the cursor to 'move'\n        this.defaultCursor = 'move';\n        // Loop over all objects and disable events / selectable. We remember its value in a temp variable stored on each object\n        this.forEachObject(function (object) {\n            object.prevEvented = object.evented;\n            object.prevSelectable = object.selectable;\n            object.evented = false;\n            object.selectable = false;\n        });\n        // Remove selection ability on the canvas\n        this.selection = false;\n        // When MouseUp fires, we set the state to idle\n        this.on('mouse:up', function (e) {\n            state = STATE_IDLE;\n        });\n        // When MouseDown fires, we set the state to panning\n        this.on('mouse:down', function (e) {\n            state = STATE_PANNING;\n            lastClientX = e.e.clientX;\n            lastClientY = e.e.clientY;\n        });\n        // When the mouse moves, and we're panning (mouse down), we continue\n        this.on('mouse:move', function (e) {\n            if (state === STATE_PANNING && e && e.e) {\n                // let delta = new fabric.Point(e.e.movementX, e.e.movementY); // No Safari support for movementX and movementY\n                // For cross-browser compatibility, I had to manually keep track of the delta\n\n                // Calculate deltas\n                var deltaX = 0;\n                var deltaY = 0;\n                if (lastClientX) {\n                    deltaX = e.e.clientX - lastClientX;\n                }\n                if (lastClientY) {\n                    deltaY = e.e.clientY - lastClientY;\n                }\n                // Update the last X and Y values\n                lastClientX = e.e.clientX;\n                lastClientY = e.e.clientY;\n\n                var delta = new fabric.Point(deltaX, deltaY);\n                _this.relativePan(delta);\n                _this.trigger('moved');\n            }\n        });\n    } else {\n        // When we exit dragmode, we restore the previous values on all objects\n        this.forEachObject(function (object) {\n            object.evented = object.prevEvented !== undefined ? object.prevEvented : object.evented;\n            object.selectable = object.prevSelectable !== undefined ? object.prevSelectable : object.selectable;\n        });\n        // Reset the cursor\n        this.defaultCursor = 'default';\n        // Remove the event listeners\n        this.off('mouse:up');\n        this.off('mouse:down');\n        this.off('mouse:move');\n        // Restore selection ability on the canvas\n        this.selection = false;\n    }\n};\n\n/***/ }),\n\n/***/ \"lyur\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('GithubCorner',{attrs:{\"url\":\"https://github.com/SabatinoMasala/fabric-clipping-demo\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\",attrs:{\"id\":\"toolbar\"}},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomIn($event)}}},[_vm._v(\"Zoom in\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomOut($event)}}},[_vm._v(\"Zoom out\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),(!_vm.dragMode)?_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = true}}},[_vm._v(\"Start panning\")]):_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = false}}},[_vm._v(\"Stop panning\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.reset()}}},[_vm._v(\"Reset pan & zoom\")]),_vm._v(\" \"),(_vm.activeObject)?_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.activeObject)?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.removeActiveObject()}}},[_vm._v(\"Delete object\")]):_vm._e()]),_vm._v(\" \"),_c('h1',{staticClass:\"text-center heading\"},[_vm._v(\"Fabric.js clipping & panning demo\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"wrapper\"},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"500\",\"height\":\"500\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[(_vm.helpMessage)?_c('p',{staticClass:\"help\"},[_vm._v(_vm._s(_vm.helpMessage))]):_vm._e()])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"oo+B\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    props: {\n        url: String\n    }\n});\n\n/***/ }),\n\n/***/ \"wuSQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__ = __webpack_require__(\"05jh\");\n\n\n\n\n\n\nvar _class = function () {\n    function _class(canvas) {\n        var _this2 = this;\n\n        var userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n        // Set some defaults\n        var defaults = {\n            originX: 'left',\n            originY: 'top',\n            fill: '#FF8552',\n            strokeWidth: 0,\n            selectable: false,\n            evented: false\n        };\n        // Overwrite the defaults with the user options\n        var options = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(defaults, userOptions);\n        // Keep track of the state\n        this.state = {\n            hasImage: false\n        };\n        // Store some instance variables\n        this.canvas = canvas;\n        this.clipRect = new fabric.Rect(options);\n        // Events\n        this.clipRect.on('moving', function (_) {\n            _this2._positionButton();\n        });\n        this.canvas.on('moved', function (_) {\n            _this2._positionButton();\n        });\n\n        // Input upload\n        this.inputUpload = document.createElement('input');\n        this.inputUpload.type = 'file';\n        document.body.append(this.inputUpload);\n\n        // Button\n        this.btnUpload = document.createElement('button');\n        this.btnUpload.innerHTML = 'Upload';\n        this.btnUpload.style.position = 'absolute';\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()('.canvas-container').append(this.btnUpload);\n\n        // DOM Events\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).click(this._onClickButtonUpload.bind(this));\n        __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.inputUpload).change(this._handleUpload.bind(this));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(_class, [{\n        key: '_handleUpload',\n        value: function _handleUpload(e) {\n            var _this3 = this;\n\n            __WEBPACK_IMPORTED_MODULE_4__helpers_UploadHelper__[\"a\" /* default */].handleEvent(e, function (fabricImage) {\n                _this3._loadImage(fabricImage);\n            });\n        }\n    }, {\n        key: '_loadImage',\n        value: function _loadImage(fabricImage) {\n            var _this4 = this;\n\n            // Store a reference to this\n            var _this = this;\n            // Set values on the image\n            fabricImage.set({\n                left: this.clipRect.left,\n                top: this.clipRect.top,\n                width: fabricImage.width * this.clipRect.width,\n                height: fabricImage.height * this.clipRect.width,\n                clipTo: function clipTo(ctx) {\n                    // Get the viewport absolute panning X and Y\n                    var panLeft = this.canvas.viewportTransform[4];\n                    var panTop = this.canvas.viewportTransform[5];\n                    this.setCoords();\n                    ctx.save();\n                    // Reset the context\n                    ctx.setTransform(1, 0, 0, 1, 0, 0);\n                    // Start drawing\n                    ctx.beginPath();\n                    // Get the values\n                    ctx.rect(_this._zoom(_this.clipRect.left) + _this._multiplied(panLeft), _this._zoom(_this.clipRect.top) + _this._multiplied(panTop), _this._zoom(_this.clipRect.width), _this._zoom(_this.clipRect.height));\n                    // Stop drawing\n                    ctx.closePath();\n                    // Restore\n                    ctx.restore();\n                }\n            });\n            // Events on the image\n            fabricImage.on('removed', function (e) {\n                _this4._setState({\n                    hasImage: false\n                });\n            });\n            // Add the image to the canvas\n            this.canvas.add(fabricImage).renderAll();\n            // Set the active image\n            this.canvas.setActiveObject(fabricImage);\n            // Update the state\n            this._setState({\n                hasImage: true\n            });\n        }\n        // Helper method to convert degrees to radians\n\n    }, {\n        key: '_degToRad',\n        value: function _degToRad(degrees) {\n            return degrees * (Math.PI / 180);\n        }\n        // Update the current state\n\n    }, {\n        key: '_setState',\n        value: function _setState(state) {\n            // Overwrite the state\n            this.state = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(this.state, state);\n            // If we have no image, we show the upload button\n            if (!this.state.hasImage) {\n                __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).show();\n                this._positionButton();\n            } else {\n                // If we have an image, we hide the upload button\n                __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).hide();\n            }\n        }\n        // Click handler for the upload button\n\n    }, {\n        key: '_onClickButtonUpload',\n        value: function _onClickButtonUpload(e) {\n            // We trigger the click event on the upload input\n            __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.inputUpload).trigger('click');\n        }\n        // Helper method to get the position of the canvas element\n\n    }, {\n        key: '_getDomCanvasPosition',\n        value: function _getDomCanvasPosition() {\n            return __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.canvas.upperCanvasEl).offset();\n        }\n        // When we're on retina displays (iPad/MBP) the devicePixelRatio isn't 1, we have to multiply values manually\n\n    }, {\n        key: '_multiplied',\n        value: function _multiplied(value) {\n            return fabric.window.devicePixelRatio * value;\n        }\n        // Get the canvas zoom and multiply the given value, dom elements don't need the multiplication with devicePixelRatio\n\n    }, {\n        key: '_zoom',\n        value: function _zoom(value) {\n            var needsDevicePixelRatio = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            var multiplier = this.canvas.getZoom() * (needsDevicePixelRatio ? fabric.window.devicePixelRatio : 1); // Retina ready!\n            return value * multiplier;\n        }\n        // Position the upload button\n\n    }, {\n        key: '_positionButton',\n        value: function _positionButton() {\n            // Get canvas position in the dom\n            var domCanvasPos = this._getDomCanvasPosition();\n            // Get the absolute panned values of the canvas\n            var panLeft = this.canvas.viewportTransform[4];\n            var panTop = this.canvas.viewportTransform[5];\n            // Dom doesn't need correction for retina displays\n            var objectPos = {\n                top: this._zoom(this.clipRect.top, false),\n                left: this._zoom(this.clipRect.left, false),\n                width: this._zoom(this.clipRect.width, false),\n                height: this._zoom(this.clipRect.height, false)\n            };\n            // Get the button size\n            var domButtonSize = {\n                width: __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).outerWidth(),\n                height: __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).outerHeight()\n            };\n            // Set the offset on the upload button\n            __WEBPACK_IMPORTED_MODULE_3_jquery___default()(this.btnUpload).offset({\n                top: objectPos.top + objectPos.height / 2 + panTop - domButtonSize.height / 2 + domCanvasPos.top,\n                left: objectPos.left + objectPos.width / 2 + panLeft - domButtonSize.width / 2 + domCanvasPos.left\n            });\n        }\n        // Public method to add the cliprect to the canvas\n\n    }, {\n        key: 'render',\n        value: function render() {\n            // Add the cliprect to the canvas\n            this.canvas.add(this.clipRect).renderAll();\n            // Reposition the button\n            this._positionButton();\n        }\n    }]);\n\n    return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_GithubCorner__ = __webpack_require__(\"zNFg\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(\"7t+N\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__classes_ClipRect__ = __webpack_require__(\"wuSQ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__classes_Panning__ = __webpack_require__(\"f384\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__classes_Panning___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__classes_Panning__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    name: 'fabric-clipping-demo',\n    components: {\n        GithubCorner: __WEBPACK_IMPORTED_MODULE_0__components_GithubCorner__[\"a\" /* default */]\n    },\n    computed: {\n        // Generate helpful messages to help the user\n        helpMessage: function helpMessage() {\n            if (this.activeObject) {\n                return 'Press backspace to delete the object';\n            }\n            if (this.dragMode) {\n                return 'Drag the canvas to pan';\n            }\n            return false;\n        }\n    },\n    methods: {\n        // Remove the active object\n        removeActiveObject: function removeActiveObject() {\n            this.activeObject.remove();\n            this.canvas.renderAll();\n        },\n\n        // Reset to initial values\n        reset: function reset() {\n            this.canvas.setZoom(1);\n            this.canvas.absolutePan(new fabric.Point(0, 0));\n            this.dragMode = false;\n            this.canvas.trigger('moved');\n        },\n\n        // Zoom in handler\n        zoomIn: function zoomIn() {\n            this.canvas.setZoom(this.canvas.getZoom() + 0.2);\n            this.canvas.trigger('moved');\n        },\n\n        // Zoom out handler\n        zoomOut: function zoomOut() {\n            this.canvas.setZoom(this.canvas.getZoom() - 0.2);\n            this.canvas.trigger('moved');\n        }\n    },\n    watch: {\n        // Dragmode watcher, this will toggle the dragmode on the canvas whenever the 'dragMode' variable changes\n        dragMode: function dragMode() {\n            this.canvas.toggleDragMode(this.dragMode);\n        }\n    },\n    mounted: function mounted() {\n        var _this = this;\n\n        // Grid variables\n        var numberOfRows = 3;\n        var numberOfCols = 3;\n        var gridWidth = 250;\n        var spacer = 1;\n\n        // Create the canvas\n        this.canvas = new fabric.Canvas('canvas');\n        this.canvas.backgroundColor = '#fff';\n\n        // Listen to some events\n        this.canvas.on('object:selected', function (e) {\n            _this.activeObject = e.target;\n        });\n        this.canvas.on('selection:cleared', function (_) {\n            _this.activeObject = false;\n        });\n\n        // Create the grid\n        for (var i = 0; i < numberOfRows; i++) {\n            for (var j = 0; j < numberOfCols; j++) {\n                // Create the cliprect objects on the grid\n                var clipRect = new __WEBPACK_IMPORTED_MODULE_2__classes_ClipRect__[\"a\" /* default */](this.canvas, {\n                    left: j * (gridWidth + spacer),\n                    top: i * (gridWidth + spacer),\n                    width: gridWidth - spacer,\n                    height: gridWidth - spacer\n                });\n                // Render it!\n                clipRect.render();\n            }\n        }\n\n        // I didn't use Vue key bindings for the sake of this example\n        var KEY_BACKSPACE = 8;\n        __WEBPACK_IMPORTED_MODULE_1_jquery___default()('body').keydown(function (e) {\n            if (e.keyCode === KEY_BACKSPACE) {\n                // Get the object and delete it if we have one\n                var obj = _this.canvas.getActiveObject();\n                if (obj) {\n                    obj.remove(); // This will trigger 'removed' on the image\n                    _this.canvas.renderAll();\n                }\n            }\n        });\n    },\n    data: function data() {\n        return {\n            canvasVisible: true,\n            activeObject: false,\n            canvas: false,\n            dragMode: false\n        };\n    }\n});\n\n/***/ }),\n\n/***/ \"zNFg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GithubCorner_vue__ = __webpack_require__(\"oo+B\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4a59b723_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GithubCorner_vue__ = __webpack_require__(\"HQ6e\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"8ZN9\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a59b723\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GithubCorner_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4a59b723_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GithubCorner_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.c8cd15206227c486711f.js","/* global fabric */\nimport $ from 'jquery';\nexport default {\n    handleEvent(e, callback) {\n\n        // If the user cancelled, we want to return\n        if (e.target.files.length === 0) { return; }\n        // Get the first file\n        const file = e.target.files[0];\n        // Create a FileReader\n        const reader = new FileReader();\n\n        // Uncomment the following lines to check the filesize before loading the image\n\n        // let size = file.size/1024/1024;\n        // if (size > 5) {\n        //     alert('Images larger than 5MB are not accepted.');\n        //     return;\n        // }\n\n        // Set the onload event handler\n        reader.onload = (f) => {\n            // Get the result\n            let data = f.target.result;\n            // Create an image from the data we got back\n            fabric.Image.fromURL(data, (img) => {\n                let aspect = 0;\n                let fabricImage = null;\n                const imageProps = {\n                    left: 0,\n                    top: 0,\n                    originX: 'left',\n                    originY: 'top',\n                    angle: 0\n                };\n                let props = {};\n                // Landscape image\n                if (img.width > img.height) {\n                    // Set the aspect\n                    aspect = img.width / img.height;\n                    // Set the props\n                    props = Object.assign(imageProps, {\n                        width: 1,\n                        height: 1 / aspect\n                    });\n                } else { // Portrait image\n                    // Set the aspect\n                    aspect = img.height / img.width;\n                    // Set the props\n                    props = Object.assign(imageProps, {\n                        width: 1 / aspect,\n                        height: 1\n                    })\n                }\n                // Assign the props to the fabric image\n                fabricImage = img.set(props);\n                // Callback\n                callback(fabricImage);\n            });\n        };\n        // Start the reader\n        reader.readAsDataURL(file);\n        // Reset the input[type=\"file\"]\n        $(e.currentTarget).val('');\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/UploadHelper.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"github-corner\",attrs:{\"target\":\"_blank\",\"href\":_vm.url,\"aria-label\":\"View source on Github\"}},[_c('svg',{staticStyle:{\"fill\":\"#151513\",\"color\":\"#fff\",\"position\":\"absolute\",\"top\":\"0\",\"border\":\"0\",\"right\":\"0\"},attrs:{\"width\":\"80\",\"height\":\"80\",\"viewBox\":\"0 0 250 250\",\"aria-hidden\":\"true\"}},[_c('path',{attrs:{\"d\":\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"}}),_c('path',{staticClass:\"octo-arm\",staticStyle:{\"transform-origin\":\"130px 106px\"},attrs:{\"d\":\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\",\"fill\":\"currentColor\"}}),_c('path',{staticClass:\"octo-body\",attrs:{\"d\":\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\",\"fill\":\"currentColor\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a59b723\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GithubCorner.vue\n// module id = HQ6e\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c33df0da\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c33df0da\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","import Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/* global fabric */\nconst STATE_IDLE = 'idle';\nconst STATE_PANNING = 'panning';\nfabric.Canvas.prototype.toggleDragMode = function(dragMode) {\n    // Remember the previous X and Y coordinates for delta calculations\n    let lastClientX;\n    let lastClientY;\n    // Keep track of the state\n    let state = STATE_IDLE;\n    // We're entering dragmode\n    if (dragMode) {\n        // Discard any active object\n        this.discardActiveObject();\n        // Set the cursor to 'move'\n        this.defaultCursor = 'move';\n        // Loop over all objects and disable events / selectable. We remember its value in a temp variable stored on each object\n        this.forEachObject(function(object) {\n            object.prevEvented = object.evented;\n            object.prevSelectable = object.selectable;\n            object.evented = false;\n            object.selectable = false;\n        });\n        // Remove selection ability on the canvas\n        this.selection = false;\n        // When MouseUp fires, we set the state to idle\n        this.on('mouse:up', function (e) {\n            state = STATE_IDLE;\n        });\n        // When MouseDown fires, we set the state to panning\n        this.on('mouse:down', (e) => {\n            state = STATE_PANNING;\n            lastClientX = e.e.clientX;\n            lastClientY = e.e.clientY;\n        });\n        // When the mouse moves, and we're panning (mouse down), we continue\n        this.on('mouse:move', (e) => {\n            if (state === STATE_PANNING && e && e.e) {\n                // let delta = new fabric.Point(e.e.movementX, e.e.movementY); // No Safari support for movementX and movementY\n                // For cross-browser compatibility, I had to manually keep track of the delta\n\n                // Calculate deltas\n                let deltaX = 0;\n                let deltaY = 0;\n                if (lastClientX) {\n                    deltaX = e.e.clientX - lastClientX;\n                }\n                if (lastClientY) {\n                    deltaY = e.e.clientY - lastClientY;\n                }\n                // Update the last X and Y values\n                lastClientX = e.e.clientX;\n                lastClientY = e.e.clientY;\n\n                let delta = new fabric.Point(deltaX, deltaY);\n                this.relativePan(delta);\n                this.trigger('moved');\n            }\n        });\n    } else {\n        // When we exit dragmode, we restore the previous values on all objects\n        this.forEachObject(function(object) {\n            object.evented = (object.prevEvented !== undefined) ? object.prevEvented : object.evented;\n            object.selectable = (object.prevSelectable !== undefined) ? object.prevSelectable : object.selectable;\n        });\n        // Reset the cursor\n        this.defaultCursor = 'default';\n        // Remove the event listeners\n        this.off('mouse:up');\n        this.off('mouse:down');\n        this.off('mouse:move');\n        // Restore selection ability on the canvas\n        this.selection = false;\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Panning.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('GithubCorner',{attrs:{\"url\":\"https://github.com/SabatinoMasala/fabric-clipping-demo\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\",attrs:{\"id\":\"toolbar\"}},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomIn($event)}}},[_vm._v(\"Zoom in\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.zoomOut($event)}}},[_vm._v(\"Zoom out\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),(!_vm.dragMode)?_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = true}}},[_vm._v(\"Start panning\")]):_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragMode = false}}},[_vm._v(\"Stop panning\")]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.reset()}}},[_vm._v(\"Reset pan & zoom\")]),_vm._v(\" \"),(_vm.activeObject)?_c('div',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.activeObject)?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.removeActiveObject()}}},[_vm._v(\"Delete object\")]):_vm._e()]),_vm._v(\" \"),_c('h1',{staticClass:\"text-center heading\"},[_vm._v(\"Fabric.js clipping & panning demo\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"wrapper\"},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"500\",\"height\":\"500\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[(_vm.helpMessage)?_c('p',{staticClass:\"help\"},[_vm._v(_vm._s(_vm.helpMessage))]):_vm._e()])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c33df0da\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = lyur\n// module chunks = 1","<template>\n    <a target=\"_blank\" :href=\"url\" class=\"github-corner\" aria-label=\"View source on Github\"><svg width=\"80\" height=\"80\" viewBox=\"0 0 250 250\" style=\"fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;\" aria-hidden=\"true\"><path d=\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"></path><path d=\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\" fill=\"currentColor\" style=\"transform-origin: 130px 106px;\" class=\"octo-arm\"></path><path d=\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\" fill=\"currentColor\" class=\"octo-body\"></path></svg></a>\n</template>\n<style scoped>\n    a {\n        display: block;\n        position: relative;\n        z-index: 9999999;\n    }\n    .github-corner:hover .octo-arm{\n        animation:octocat-wave 560ms ease-in-out\n    }\n    @keyframes octocat-wave{\n        0%,100%{\n            transform:rotate(0)\n        }\n        20%,60%{\n            transform:rotate(-25deg)\n        }\n        40%,80%{\n            transform:rotate(10deg)\n        }\n    }\n    @media (max-width:500px){\n        .github-corner:hover .octo-arm{\n            animation:none\n        }\n        .github-corner .octo-arm{\n            animation:octocat-wave 560ms ease-in-out\n        }\n    }\n</style>\n<script>\n    export default {\n        props: {\n            url: String\n        }\n    }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/GithubCorner.vue","import $ from 'jquery'\nimport UploadHelper from '../helpers/UploadHelper'\nexport default class {\n    constructor(canvas, userOptions = {}) {\n        // Set some defaults\n        let defaults = {\n            originX: 'left',\n            originY: 'top',\n            fill: '#FF8552',\n            strokeWidth: 0,\n            selectable: false,\n            evented: false,\n        };\n        // Overwrite the defaults with the user options\n        let options = Object.assign(defaults, userOptions);\n        // Keep track of the state\n        this.state = {\n            hasImage: false\n        };\n        // Store some instance variables\n        this.canvas = canvas;\n        this.clipRect = new fabric.Rect(options);\n        // Events\n        this.clipRect.on('moving', _ => {\n            this._positionButton();\n        });\n        this.canvas.on('moved', _ => {\n            this._positionButton();\n        });\n\n        // Input upload\n        this.inputUpload = document.createElement('input');\n        this.inputUpload.type = 'file';\n        document.body.append(this.inputUpload);\n\n        // Button\n        this.btnUpload = document.createElement('button');\n        this.btnUpload.innerHTML = 'Upload';\n        this.btnUpload.style.position = 'absolute';\n        $('.canvas-container').append(this.btnUpload);\n\n        // DOM Events\n        $(this.btnUpload).click(this._onClickButtonUpload.bind(this));\n        $(this.inputUpload).change(this._handleUpload.bind(this));\n    }\n    _handleUpload(e) {\n        UploadHelper.handleEvent(e, (fabricImage) => {\n            this._loadImage(fabricImage)\n        });\n    }\n    _loadImage(fabricImage) {\n        // Store a reference to this\n        let _this = this;\n        // Set values on the image\n        fabricImage.set({\n            left: this.clipRect.left,\n            top: this.clipRect.top,\n            width: fabricImage.width * this.clipRect.width,\n            height: fabricImage.height * this.clipRect.width,\n            clipTo(ctx) {\n                // Get the viewport absolute panning X and Y\n                let panLeft = this.canvas.viewportTransform[4];\n                let panTop = this.canvas.viewportTransform[5];\n                this.setCoords();\n                ctx.save();\n                // Reset the context\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                // Start drawing\n                ctx.beginPath();\n                // Get the values\n                ctx.rect(\n                    _this._zoom(_this.clipRect.left) + _this._multiplied(panLeft),\n                    _this._zoom(_this.clipRect.top) + _this._multiplied(panTop),\n                    _this._zoom(_this.clipRect.width),\n                    _this._zoom(_this.clipRect.height)\n                );\n                // Stop drawing\n                ctx.closePath();\n                // Restore\n                ctx.restore();\n            }\n        });\n        // Events on the image\n        fabricImage.on('removed', (e) => {\n            this._setState({\n                hasImage: false\n            })\n        });\n        // Add the image to the canvas\n        this.canvas.add(fabricImage).renderAll();\n        // Set the active image\n        this.canvas.setActiveObject(fabricImage);\n        // Update the state\n        this._setState({\n            hasImage: true\n        })\n    }\n    // Helper method to convert degrees to radians\n    _degToRad(degrees) {\n        return degrees * (Math.PI / 180);\n    }\n    // Update the current state\n    _setState(state) {\n        // Overwrite the state\n        this.state = Object.assign(this.state, state);\n        // If we have no image, we show the upload button\n        if (!this.state.hasImage) {\n            $(this.btnUpload).show();\n            this._positionButton();\n        } else { // If we have an image, we hide the upload button\n            $(this.btnUpload).hide();\n        }\n    }\n    // Click handler for the upload button\n    _onClickButtonUpload(e) {\n        // We trigger the click event on the upload input\n        $(this.inputUpload).trigger('click');\n    }\n    // Helper method to get the position of the canvas element\n    _getDomCanvasPosition() {\n        return $(this.canvas.upperCanvasEl).offset();\n    }\n    // When we're on retina displays (iPad/MBP) the devicePixelRatio isn't 1, we have to multiply values manually\n    _multiplied(value) {\n        return fabric.window.devicePixelRatio * value;\n    }\n    // Get the canvas zoom and multiply the given value, dom elements don't need the multiplication with devicePixelRatio\n    _zoom(value, needsDevicePixelRatio = true) {\n        const multiplier = this.canvas.getZoom() * (needsDevicePixelRatio ? fabric.window.devicePixelRatio : 1); // Retina ready!\n        return value * multiplier;\n    }\n    // Position the upload button\n    _positionButton() {\n        // Get canvas position in the dom\n        let domCanvasPos = this._getDomCanvasPosition();\n        // Get the absolute panned values of the canvas\n        let panLeft = this.canvas.viewportTransform[4];\n        let panTop = this.canvas.viewportTransform[5];\n        // Dom doesn't need correction for retina displays\n        let objectPos = {\n            top: this._zoom(this.clipRect.top, false),\n            left: this._zoom(this.clipRect.left, false),\n            width: this._zoom(this.clipRect.width, false),\n            height: this._zoom(this.clipRect.height, false),\n        };\n        // Get the button size\n        let domButtonSize = {\n            width: $(this.btnUpload).outerWidth(),\n            height: $(this.btnUpload).outerHeight(),\n        };\n        // Set the offset on the upload button\n        $(this.btnUpload).offset({\n            top: objectPos.top + objectPos.height / 2 + panTop - domButtonSize.height / 2 + domCanvasPos.top,\n            left: objectPos.left + objectPos.width / 2 + panLeft - domButtonSize.width / 2 + domCanvasPos.left,\n        })\n    }\n    // Public method to add the cliprect to the canvas\n    render() {\n        // Add the cliprect to the canvas\n        this.canvas.add(this.clipRect).renderAll();\n        // Reposition the button\n        this._positionButton();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/ClipRect.js","<template>\n    <div>\n        <GithubCorner url=\"https://github.com/SabatinoMasala/fabric-clipping-demo\"></GithubCorner>\n        <div id=\"toolbar\" class=\"text-center\">\n            <button @click.stop.prevent=\"zoomIn\">Zoom in</button>\n            <button @click.stop.prevent=\"zoomOut\">Zoom out</button>\n            <div class=\"spacer\">&nbsp;</div>\n            <button @click.stop.prevent=\"dragMode = true\" v-if=\"!dragMode\">Start panning</button>\n            <button @click.stop.prevent=\"dragMode = false\" v-else>Stop panning</button>\n            <div class=\"spacer\">&nbsp;</div>\n            <button @click.stop.prevent=\"reset()\">Reset pan & zoom</button>\n            <div class=\"spacer\" v-if=\"activeObject\">&nbsp;</div>\n            <button class=\"delete\" @click.stop.prevent=\"removeActiveObject()\" v-if=\"activeObject\">Delete object</button>\n        </div>\n        <h1 class=\"text-center heading\">Fabric.js clipping & panning demo</h1>\n        <div id=\"app\">\n            <div class=\"wrapper\">\n                <canvas id=\"canvas\" width=\"500\" height=\"500\"></canvas>\n                <div class=\"text-center\">\n                    <p class=\"help\" v-if=\"helpMessage\">{{ helpMessage }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import GithubCorner from './components/GithubCorner'\n    import $ from 'jquery'\n    import ClipRect from './classes/ClipRect'\n    import Panning from './classes/Panning'\n    export default {\n        name: 'fabric-clipping-demo',\n        components: {\n            GithubCorner\n        },\n        computed: {\n            // Generate helpful messages to help the user\n            helpMessage() {\n                if (this.activeObject) {\n                    return 'Press backspace to delete the object';\n                }\n                if (this.dragMode) {\n                    return 'Drag the canvas to pan';\n                }\n                return false;\n            }\n        },\n        methods: {\n            // Remove the active object\n            removeActiveObject() {\n                this.activeObject.remove();\n                this.canvas.renderAll();\n            },\n            // Reset to initial values\n            reset() {\n                this.canvas.setZoom(1);\n                this.canvas.absolutePan(\n                    new fabric.Point(0, 0)\n                );\n                this.dragMode = false;\n                this.canvas.trigger('moved');\n            },\n            // Zoom in handler\n            zoomIn() {\n                this.canvas.setZoom(this.canvas.getZoom() + 0.2);\n                this.canvas.trigger('moved');\n            },\n            // Zoom out handler\n            zoomOut() {\n                this.canvas.setZoom(this.canvas.getZoom() - 0.2);\n                this.canvas.trigger('moved');\n            }\n        },\n        watch: {\n            // Dragmode watcher, this will toggle the dragmode on the canvas whenever the 'dragMode' variable changes\n            dragMode() {\n                this.canvas.toggleDragMode(this.dragMode);\n            }\n        },\n        mounted() {\n\n            // Grid variables\n            const numberOfRows = 3;\n            const numberOfCols = 3;\n            const gridWidth = 250;\n            const spacer = 1;\n\n            // Create the canvas\n            this.canvas = new fabric.Canvas('canvas');\n            this.canvas.backgroundColor = '#fff';\n\n            // Listen to some events\n            this.canvas.on('object:selected', e => {\n                this.activeObject = e.target;\n            });\n            this.canvas.on('selection:cleared', _ => {\n                this.activeObject = false;\n            });\n\n            // Create the grid\n            for (let i = 0; i < numberOfRows; i++) {\n                for (let j = 0; j < numberOfCols; j++) {\n                    // Create the cliprect objects on the grid\n                    let clipRect = new ClipRect(this.canvas, {\n                        left: j * (gridWidth + spacer),\n                        top: i * (gridWidth + spacer),\n                        width: (gridWidth - spacer),\n                        height: (gridWidth - spacer)\n                    });\n                    // Render it!\n                    clipRect.render();\n                }\n            }\n\n            // I didn't use Vue key bindings for the sake of this example\n            const KEY_BACKSPACE = 8;\n            $('body').keydown((e) => {\n                if (e.keyCode === KEY_BACKSPACE) {\n                    // Get the object and delete it if we have one\n                    const obj = this.canvas.getActiveObject();\n                    if (obj) {\n                        obj.remove(); // This will trigger 'removed' on the image\n                        this.canvas.renderAll();\n                    }\n                }\n            });\n\n        },\n        data() {\n            return {\n                canvasVisible: true,\n                activeObject: false,\n                canvas: false,\n                dragMode: false\n            }\n        }\n    }\n</script>\n<style lang=\"scss\">\n    $colorPrimary: #fff;\n    $colorDelete: #D64933;\n    $colorText: #2B303A;\n    $colorBg: #92DCE5;\n    * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n    body {\n        background-color: $colorBg;\n        font-family: HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif;\n        color: $colorText;\n    }\n    .help {\n        display: inline-block;\n        padding: 10px;\n        background-color: $colorPrimary;\n    }\n    .heading {\n        padding-top: 100px;\n    }\n    #toolbar {\n        background-color: $colorPrimary;\n        padding: 10px;\n        z-index: 999;\n        .spacer {\n            display: inline-block;\n            width: 20px;\n        }\n        button.delete {\n            background-color: $colorDelete;\n            color: #fff;\n        }\n    }\n    button {\n        border: 0;\n        background-color: $colorText;\n        color: $colorPrimary;\n        cursor: pointer;\n        padding: 10px;\n    }\n    .text-center {\n        text-align: center;\n    }\n    .canvas-container {\n        border: 2px $colorPrimary solid;\n        overflow: hidden;\n        margin: 50px auto;\n    }\n    input[type=file] {\n        position: absolute;\n        opacity: 0;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/App.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a59b723\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GithubCorner.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GithubCorner.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a59b723\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GithubCorner.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a59b723\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GithubCorner.vue\n// module id = zNFg\n// module chunks = 1"],"sourceRoot":""}